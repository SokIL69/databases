USE web_shop;

SELECT * FROM orders_products;
SELECT * FROM orders;

-- После добавления записей в orders_products устанавливаем created_at равным времени создания заказа:
UPDATE orders_products SET created_at = (SELECT created_at FROM orders WHERE orders_products.order_id = orders.id);


INSERT INTO orders_products (order_id, product_id, product_count) VALUES
(1, 80, 2),
(2, 39, 2),
(2, 120, 3),
(3, 125, 2),
(3, 135, 1),
(4, 101, 2),
(4, 134, 2),
(5, 151, 1),
(5, 158, 1),
(6, 109, 2),
(7, 77, 1),
(7, 183, 2),
(8, 79, 3),
(9, 187, 3),
(10, 7, 2),
(10, 185, 3),
(11, 26, 3),
(12, 128, 2),
(13, 32, 3),
(14, 6, 3),
(15, 174, 2),
(16, 12, 1),
(17, 26, 3),
(18, 103, 3),
(18, 153, 2),
(19, 71, 1),
(20, 189, 2),
(21, 44, 2),
(22, 170, 1),
(23, 69, 3),
(24, 54, 3),
(24, 59, 3),
(24, 87, 2),
(24, 108, 3),
(25, 171, 2),
(26, 21, 2),
(26, 145, 2),
(27, 91, 2),
(28, 131, 2),
(28, 167, 1),
(29, 26, 3),
(29, 184, 2),
(30, 110, 1),
(31, 80, 1),
(32, 54, 1),
(33, 132, 1),
(34, 189, 2),
(35, 5, 2),
(35, 168, 3),
(36, 89, 1),
(37, 86, 2),
(38, 46, 1),
(39, 60, 1),
(40, 120, 2),
(41, 177, 3),
(42, 144, 3),
(43, 96, 3),
(44, 161, 1),
(45, 168, 1),
(46, 131, 2),
(47, 54, 3),
(48, 53, 1),
(49, 149, 1),
(50, 145, 3),
(51, 4, 3),
(52, 143, 2),
(53, 131, 1),
(54, 105, 2),
(55, 11, 2),
(55, 55, 2),
(56, 3, 3),
(57, 150, 2),
(58, 119, 3),
(59, 43, 3),
(60, 189, 3),
(61, 159, 3),
(62, 139, 3),
(63, 156, 2),
(64, 171, 3),
(65, 187, 1),
(66, 112, 3),
(66, 150, 1),
(67, 8, 2),
(68, 38, 2),
(69, 163, 1),
(70, 102, 2),
(70, 179, 3),
(71, 195, 2),
(72, 133, 1),
(73, 10, 2),
(74, 188, 2),
(75, 144, 2),
(76, 60, 3),
(76, 131, 3),
(77, 84, 2),
(78, 152, 1),
(79, 105, 2),
(80, 127, 2),
(81, 54, 3),
(82, 114, 2),
(83, 32, 3),
(83, 122, 2),
(84, 195, 1),
(85, 194, 3),
(86, 116, 2),
(86, 183, 2),
(87, 81, 3),
(87, 187, 1),
(88, 169, 1),
(89, 89, 1),
(90, 34, 1),
(91, 99, 3),
(92, 96, 1),
(93, 173, 1),
(94, 87, 3),
(95, 150, 2),
(96, 35, 1),
(97, 63, 1),
(97, 131, 3),
(98, 14, 3),
(99, 112, 2),
(100, 66, 1),
(101, 16, 1),
(102, 78, 2),
(103, 115, 2),
(104, 69, 2),
(105, 46, 3),
(106, 83, 1),
(107, 86, 2),
(108, 27, 1),
(109, 49, 3),
(110, 74, 3),
(111, 114, 2),
(112, 64, 1),
(112, 193, 2),
(113, 165, 3),
(113, 197, 1),
(114, 115, 1),
(115, 33, 2),
(116, 171, 1),
(117, 95, 3),
(117, 97, 3),
(118, 8, 2),
(118, 43, 3),
(118, 72, 1),
(118, 171, 3),
(119, 163, 3),
(120, 152, 3),
(121, 37, 3),
(122, 34, 3),
(122, 104, 1),
(122, 109, 3),
(123, 103, 3),
(123, 154, 1),
(124, 121, 2),
(125, 89, 3),
(126, 120, 1),
(127, 112, 1),
(128, 76, 3),
(128, 182, 1),
(129, 44, 1),
(129, 153, 1),
(130, 104, 1),
(131, 193, 2),
(132, 185, 2),
(133, 53, 3),
(134, 51, 2),
(135, 23, 2),
(136, 72, 2),
(137, 16, 1),
(138, 156, 1),
(138, 189, 2),
(139, 12, 3),
(139, 98, 1),
(139, 126, 2),
(140, 61, 3),
(141, 48, 1),
(142, 62, 1),
(143, 105, 3),
(144, 34, 2),
(145, 119, 3),
(145, 163, 1),
(146, 176, 1),
(147, 73, 1),
(147, 90, 1),
(148, 149, 3),
(149, 63, 2),
(149, 82, 1),
(150, 142, 2),
(151, 34, 1),
(152, 163, 1),
(153, 170, 3),
(153, 171, 2),
(154, 181, 2),
(155, 78, 3),
(155, 98, 3),
(155, 185, 1),
(155, 194, 1),
(156, 139, 3),
(157, 98, 2),
(158, 2, 3),
(158, 180, 2),
(159, 48, 2),
(160, 133, 3),
(161, 60, 2),
(162, 115, 1),
(163, 152, 3),
(164, 40, 2),
(165, 72, 1),
(165, 173, 2),
(166, 126, 2),
(167, 16, 3),
(168, 1, 2),
(168, 163, 3),
(169, 162, 2),
(170, 58, 2),
(171, 127, 3),
(172, 101, 2),
(173, 19, 3),
(174, 19, 1),
(175, 148, 1),
(175, 152, 1),
(176, 57, 3),
(176, 148, 1),
(176, 189, 2),
(177, 57, 3),
(178, 187, 2),
(179, 48, 2),
(180, 167, 3),
(181, 21, 3),
(181, 179, 1),
(182, 119, 1),
(183, 197, 3),
(184, 86, 2),
(185, 42, 2),
(186, 137, 2),
(187, 107, 1),
(187, 110, 2),
(188, 171, 1),
(189, 1, 2),
(189, 89, 2),
(189, 132, 3),
(190, 16, 1),
(191, 175, 1),
(192, 51, 1),
(192, 158, 1),
(193, 13, 1),
(194, 153, 2),
(195, 8, 1),
(196, 79, 1),
(197, 103, 1),
(198, 129, 1),
(199, 107, 3),
(199, 122, 2),
(200, 156, 1);

SELECT * FROM orders_products;
SELECT * FROM orders;


/*
INSERT INTO orders_products
(order_id, product_id, product_count)
VALUES(
(SELECT id FROM orders ORDER BY RAND() LIMIT 1),
(SELECT id FROM products  ORDER BY RAND() LIMIT 1),
FLOOR(1 + RAND() * 3)
);
*/

/*
INSERT INTO orders_products
(order_id, product_id, product_count)
VALUES
(
	(
		SELECT id 
		   FROM orders 
		  WHERE id NOT IN (
				  			SELECT op.order_id AS id 
				  			  FROM orders_products op
		  			  )
		  ORDER BY RAND()
		  LIMIT 1
	),
	(SELECT id FROM products  ORDER BY RAND() LIMIT 1),
	FLOOR(1 + RAND() * 3)
);
*/

/*
SELECT 
SELECT id FROM orders  ORDER BY RAND() LIMIT 1 AS order_id,
SELECT id FROM products  ORDER BY RAND() LIMIT 1 AS product_id,
FLOOR(1 + RAND() * 3);
*/